---
/* src/components/section/Navbar.astro */
import { Icon } from 'astro-icon/components';
import { navbarContent } from 'src/content/navbar';
import type { NavbarContent } from 'src/schemas/navbar';
import { Image } from 'astro:assets';
const { content = navbarContent } = Astro.props as { content: NavbarContent };
---
<nav class="fixed top-0 left-0 w-full bg-white border-b border-primary-100 z-9999">
  <div class="w-full mx-auto grid grid-cols-2 md:flex items-center justify-between py-4 px-4 md:px-10">
    <!-- Logo -->
    <a href={content.logo.href} class="flex items-center gap-2 group w-fit">
      <div class="flex items-center justify-center transition min-h-12">
        <Image width={120} height={60} src={content.logo.svg} alt={content.logo.alt} />
      </div>
    </a>
    
    <!-- Botões à direita (mobile: aparecem antes do menu) -->
    <div class="flex md:order-2 gap-2">
      <a
        href={content.cta.href}
        class="btn btn-primary-solid btn-md"
      >
        {content.cta.text}
        <Icon is:inline width={18} height={18} stroke-width={2} class="icon-strong" name={content.cta.icon} />
      </a>
      <!-- Botão hamburguer no mobile -->
      <button
        data-collapse-toggle="navbar-menu"
        type="button"
        class="md:hidden inline-flex items-center justify-center rounded p-2 text-primary hover:bg-primary-100 transition duration-150 focus:outline-none focus:ring-2 focus:ring-primary-200 active:scale-90"
        aria-controls="navbar-menu"
        aria-expanded="false"
        aria-label="Abrir menu"
      >
        <Icon class="h-6 w-6" name="lucide:menu" />
      </button>
    </div>

    <!-- Menu central + botão link (escondidos no mobile) -->
    <div class="items-center col-span-2 justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-menu">
      <ul class="flex flex-col p-4 md:p-0 mt-4 font-brand text-base font-medium md:flex-row md:gap-8 md:mt-0 gap-2 border-t border-zinc-300 md:border-transparent">
        {content.links.map(link => (
          <li>
            <a
              href={link.href}
              class="text-secondary-800 transition-colors duration-200 ease-out relative after:block after:mt-0.5 after:w-0 hover:after:w-full after:transition-all after:duration-200 after:h-[2px] after:bg-primary after:absolute after:bottom-0 after:left-0 after:rounded hover:text-primary">
              {link.text}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const button = document.querySelector('[data-collapse-toggle]');
    const menu = document.getElementById('navbar-menu');
    
    if (button && menu) {
      button.addEventListener('click', () => {
        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        button.setAttribute('aria-expanded', (!isExpanded).toString());
        menu.classList.toggle('hidden');
      });
    }
  });
</script>